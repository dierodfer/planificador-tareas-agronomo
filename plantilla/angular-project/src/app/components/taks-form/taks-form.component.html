<div class="offset-md-3 col-md-6">
    <mat-form-field class="w-100">
      <mat-select placeholder="Tipo de tarea" [formControl]="controlTipo" required>
          <mat-option value="Desinfección">Desinfección</mat-option>
          <mat-option value="Fase de plantación">Fase de plantación</mat-option>

          <mat-option value="Hibridación">Hibridación</mat-option>
          <mat-option value="Castración y polinización">Castración y polinización</mat-option>
          <mat-option value="Mantenimiento de plantas">Mantenimiento de plantas <mat-icon>arrow_drop_down_circle</mat-icon></mat-option>

          <mat-option value="Recolección de frutos">Recolección de frutos</mat-option>
          <mat-option value="Limpieza de frutos">Limpieza de frutos</mat-option>
          <mat-option value="Retirada plantas">Retirada plantas</mat-option>
          <mat-option value="Limpieza otros">Limpieza otros <mat-icon>arrow_drop_down_circle</mat-icon></mat-option>

      </mat-select>
      <mat-error *ngIf="controlTipo.hasError('required')">Campo <strong>obligatorio</strong></mat-error>
    </mat-form-field>

    <mat-form-field *ngIf="controlTipo.value == 'Mantenimiento de plantas' || controlTipo.value == 'Limpieza otros'" class="w-100" required>
      <mat-select placeholder="Tipo de subtarea" [formControl]="controlSubtipo">
          <ng-container *ngIf="controlTipo.value == 'Mantenimiento de plantas'">
            <mat-option value="Retirada de hojas y malas hierbas">Retirada de hojas y malas hierbas</mat-option>
            <mat-option value="Sulfatación">Sulfatación</mat-option>
            <mat-option value="Sujeción de plantas">Sujeción de plantas</mat-option>
          </ng-container>
          <ng-container *ngIf="controlTipo.value == 'Limpieza otros'">
            <mat-option value="Cuartones y pasillos">Cuartones y pasillos</mat-option>
            <mat-option value="Retirada de tablas">Retirada de tablas</mat-option>
            <mat-option value="Acceso a los invernaderos y herramientas">Acceso a los invernaderos y herramientas</mat-option>
          </ng-container>
      </mat-select>
    </mat-form-field>

    <mat-form-field class="w-100">
      <mat-select placeholder="Elige los usuarios de la tarea" [formControl]="controlUsuarios" multiple required>
        <mat-select-trigger>
          {{controlUsuarios.value[0] ? controlUsuarios.value[0].nombre+','+controlUsuarios.value[0].apellidos : ''}}
          <span *ngIf="controlUsuarios.value?.length > 1" class="example-additional-selection">
            (+{{controlUsuarios.value.length - 1}} {{controlUsuarios.value?.length === 2 ? 'persona' : 'personas'}})
          </span>
        </mat-select-trigger>
        <mat-option *ngFor="let usuario of usuarios" [value]="usuario">{{usuario.nombre}}</mat-option>
      </mat-select>
      <mat-error *ngIf="controlUsuarios.hasError('required')">Debe añadir al menos a <strong>1</strong> trabajador</mat-error>
    </mat-form-field>

    <mat-form-field class="w-50">
      <input matInput [min]="minDatepicker" [formControl]="controlFecha" [matDatepicker]="picker" placeholder="Elige una fecha de comienzo" required>
      <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
      <mat-datepicker touchUi #picker></mat-datepicker>
      <mat-error *ngIf="controlFecha.hasError('required')">Campo <strong>obligatorio</strong></mat-error>
    </mat-form-field>

    <mat-form-field class="w-50">
      <input matInput placeholder="Duración en días" type="number" [formControl]="controlRepit" required>
      <mat-error *ngIf="controlFecha.hasError('required')">Campo <strong>obligatorio</strong>, con rango de 1 a 30 dias máximo</mat-error>
    </mat-form-field>

    <mat-form-field class="w-100">
      <textarea matInput placeholder="Descripción (opcional)" rows="2" [formControl]="controlDescrip"></textarea>
    </mat-form-field>
 
    <br>
    <a mat-raised-button class="my-3" color="accent" (click)="submit()"><mat-icon>add</mat-icon> Añadir/actualizar</a>
  </div>